tests,host,command,args,workdirectory,examiningString,isExaminingStringExpectedInStdout,expectedExit,timeout,exitShell
Verify deleting a user,sc1,ldapdelete,"uid=user.openDJTafTest,ou=People,COM_INF_LDAP_ROOT_SUFFIX",,,,0,5000,exit
Verify deleting a role,sc1,ldapdelete,"cn=role.openDJTafTest,ou=Roles,COM_INF_LDAP_ROOT_SUFFIX",,,,0,10000,exit
Verify deleting a group,sc1,ldapdelete,"cn=group.openDJTafTest,ou=Groups,COM_INF_LDAP_ROOT_SUFFIX",,,,0,10000,exit
Verify deleting a scope,sc1,ldapdelete,"cn=scope.openDJTafTest,ou=Scopes,COM_INF_LDAP_ROOT_SUFFIX",,,,0,10000,exit
Verify adding all the test entries on the first node,sc1,ldapmodify,-a -f addTestEntries.ldif,/tmp,ADD operation successful,yes,0,5000,exit
Verify that user <uid=user.openDJTafTest> is added on the first node,sc1,ldapsearch,"-b ou=people,COM_INF_LDAP_ROOT_SUFFIX --countEntries uid=user.openDJTafTest",,Total number of matching entries: 1,yes,0,5000,exit
Verify that user <uid=user.openDJTafTest> is replicated to the second node,sc2,ldapsearch,"-b ou=people,COM_INF_LDAP_ROOT_SUFFIX --countEntries uid=user.openDJTafTest",,Total number of matching entries: 1,yes,0,5000,exit
Verify that user <uid=cppUser> is added on the first node,sc1,ldapsearch,-b "ou=People,COM_INF_LDAP_ROOT_SUFFIX objectClass=userTypeOC userType=cppUser|grep dn",,"dn: uid=cppUser,ou=People,COM_INF_LDAP_ROOT_SUFFIX",yes,0,5000,exit
Verify that user <uid=cppUser> is replicated to the second node,sc2,ldapsearch,-b "ou=People,COM_INF_LDAP_ROOT_SUFFIX --countEntries uid=cppUser",,Total number of matching entries: 1,yes,0,5000,exit
Verify that user <uid=laadUser> is added on the first node,sc1,ldapsearch,-b "ou=people,COM_INF_LDAP_ROOT_SUFFIX objectClass=userTypeOC userType=laadUser|grep dn",,"dn: uid=laadUser,ou=People,COM_INF_LDAP_ROOT_SUFFIX",yes,0,5000,exit
verify that user <uid=laadUser> is replicated to the second node,sc2,ldapsearch,-b "ou=people,COM_INF_LDAP_ROOT_SUFFIX --countEntries uid=laadUser",,Total number of matching entries: 1,yes,0,5000,exit
Verify that user <uid=m2mUser> is added on the first node,sc1,ldapsearch,-b "ou=people,COM_INF_LDAP_ROOT_SUFFIX objectClass=userTypeOC userType=M2MUser|grep dn",,"dn: uid=m2mUser,ou=People,COM_INF_LDAP_ROOT_SUFFIX",yes,0,5000,exit
verify that user <uid=m2mUser> is replicated to the second node,sc2,ldapsearch,-b "ou=people,COM_INF_LDAP_ROOT_SUFFIX --countEntries uid=m2mUser",,Total number of matching entries: 1,yes,0,5000,exit
Verify failure to add existing users on the first node,sc1,ldapmodify,-a -f addTestEntries.ldif,/tmp,ADD operation failed,yes,0,5000,exit
Verify changing the password of the user <uid=user.openDJTafTest> on the second node,sc2,ldappasswordmodify,-a "dn:uid=user.openDJTafTest,ou=People,COM_INF_LDAP_ROOT_SUFFIX" -c oldPassword -n newPassword,,The LDAP password modify operation was successful,yes,0,10000,exit
Verify that the password of <uid=user.openDJTafTest> is changed on the second node,sc2,ldapsearch,"-D uid=user.openDJTafTest,ou=people,COM_INF_LDAP_ROOT_SUFFIX -w newPassword -b ou=people,COM_INF_LDAP_ROOT_SUFFIX --countEntries uid=user.openDJTafTest",,Total number of matching entries: 1,yes,0,5000,exit
Verify that the password change is replicated to the first node,sc1,ldapsearch,"-D uid=user.openDJTafTest,ou=people,COM_INF_LDAP_ROOT_SUFFIX -w newPassword -b ou=people,COM_INF_LDAP_ROOT_SUFFIX --countEntries uid=user.openDJTafTest",,Total number of matching entries: 1,yes,0,5000,exit
Verify that the role <cn=role.openDJTafTest> is added on the first node,sc1,ldapsearch,-b "ou=Roles,COM_INF_LDAP_ROOT_SUFFIX --countEntries cn=role.openDJTafTest",,Total number of matching entries: 1,yes,0,5000,exit
Verify that the role <cn=role.openDJTafTest> is replicated to the second node,sc2,ldapsearch,-b "ou=Roles,COM_INF_LDAP_ROOT_SUFFIX --countEntries cn=role.openDJTafTest",,Total number of matching entries: 1,yes,0,5000,exit
Verify that the group <cn=group.openDJTafTest> is added on the first node,sc1,ldapsearch,"-b ou=Groups,COM_INF_LDAP_ROOT_SUFFIX --countEntries cn=group.openDJTafTest",,Total number of matching entries: 1,yes,0,5000,exit
verify that the group <cn=group.openDJTafTest> is replicated to the second node,sc2,ldapsearch,"-b ou=Groups,COM_INF_LDAP_ROOT_SUFFIX --countEntries cn=group.openDJTafTest",,Total number of matching entries: 1,yes,0,5000,exit
Verify that the scope <cn=scope.openDJTafTest> is added on the first node,sc1,ldapsearch,"-b ou=Scopes,COM_INF_LDAP_ROOT_SUFFIX --countEntries cn=scope.openDJTafTest",,Total number of matching entries: 1,yes,0,5000,exit
verify that the scope <cn=scope.openDJTafTest> is replicated to the second node,sc2,ldapsearch,"-b ou=Scopes,COM_INF_LDAP_ROOT_SUFFIX --countEntries cn=scope.openDJTafTest",,Total number of matching entries: 1,yes,0,5000,exit
Verify modifying description of the entries on the first node,sc1,ldapmodify,-f modifyDescription.ldif,/tmp,MODIFY operation successful,yes,0,5000,exit
Verify that the description of user <uid=user.openDJTafTest> is changed on the first node,sc1,ldapsearch,-b "ou=people,COM_INF_LDAP_ROOT_SUFFIX uid=user.openDJTafTest",,description: This user is for OpenDJ replication TAF test,yes,0,5000,exit
Verify that the new description of user <uid=user.openDJTafTest> is replicated to the second node,sc2,ldapsearch,-b "ou=people,COM_INF_LDAP_ROOT_SUFFIX uid=user.openDJTafTest",,description: This user is for OpenDJ replication TAF test,yes,0,5000,exit
Verify that the description of role <cn=role.openDJTafTest> is changed on the first node,sc1,ldapsearch,-b "ou=Roles,COM_INF_LDAP_ROOT_SUFFIX cn=role.openDJTafTest",,description: This role is for OpenDJ replication TAF test,yes,0,5000,exit
Verify that the new description of role <cn=role.openDJTafTest> is replicated to the second node,sc2,ldapsearch,-b "ou=Roles,COM_INF_LDAP_ROOT_SUFFIX cn=role.openDJTafTest",,description: This role is for OpenDJ replication TAF test,yes,0,5000,exit
Verify that the description of group <cn=group.openDJTafTest> is changed on the first node,sc1,ldapsearch,-b "ou=Groups,COM_INF_LDAP_ROOT_SUFFIX cn=group.openDJTafTest",,description: This group is for OpenDJ replication TAF test,yes,0,5000,exit
Verify that the new description of group <cn=group.openDJTafTest> is replicated to the second node,sc2,ldapsearch,-b "ou=Groups,COM_INF_LDAP_ROOT_SUFFIX cn=group.openDJTafTest",,description: This group is for OpenDJ replication TAF test,yes,0,5000,exit
Verify that the description of scope <cn=scope.openDJTafTest> is changed on the first node,sc1,ldapsearch,-b "ou=Scopes,COM_INF_LDAP_ROOT_SUFFIX cn=scope.openDJTafTest",,description: This scope is for OpenDJ replication TAF test,yes,0,5000,exit
Verify that the new description of scope <cn=scope.openDJTafTest> is replicated to the second node,sc2,ldapsearch,-b "ou=Scopes,COM_INF_LDAP_ROOT_SUFFIX cn=scope.openDJTafTest",,description: This scope is for OpenDJ replication TAF test,yes,0,5000,exit
Verify assigning role <cn=role.openDJTafTest> group <cn=group.openDJTafTest> and scope <cn=scope.openDJTafTest> to user <uid=user.openDJTafTest> on the first node,sc1,ldapmodify,-a -f assignToUser.ldif,/tmp,MODIFY operation successful,yes,0,5000,exit
Verify that the role <cn=role.openDJTafTest> is assigned to user <uid=user.openDJTafTest> on the first node,sc1,ldapsearch,"-b ou=Roles,COM_INF_LDAP_ROOT_SUFFIX cn=role.openDJTafTest",,"uniqueMember: uid=user.openDJTafTest,ou=People,COM_INF_LDAP_ROOT_SUFFIX",yes,0,5000,exit
Verify that the role assigning for role <cn=role.openDJTafTest> to user <uid=user.openDJTafTest> is replicated on the second node,sc2,ldapsearch,"-b ou=Roles,COM_INF_LDAP_ROOT_SUFFIX cn=role.openDJTafTest",,"uniqueMember: uid=user.openDJTafTest,ou=People,COM_INF_LDAP_ROOT_SUFFIX",yes,0,5000,exit
Verify that group <cn=group.openDJTafTest> is assigned to user <uid=user.openDJTafTest> on the first node,sc1,ldapsearch,"-b ou=Groups,COM_INF_LDAP_ROOT_SUFFIX cn=group.openDJTafTest",,"uniqueMember: uid=user.openDJTafTest,ou=People,COM_INF_LDAP_ROOT_SUFFIX",yes,0,5000,exit
Verify that assigning for group <cn=group.openDJTafTest> to user <uid=user.openDJTafTest> is replicated to the second node,sc2,ldapsearch,"-b ou=Groups,COM_INF_LDAP_ROOT_SUFFIX cn=group.openDJTafTest",,"uniqueMember: uid=user.openDJTafTest,ou=People,COM_INF_LDAP_ROOT_SUFFIX",yes,0,5000,exit
Verify that scope <cn=scope.openDJTafTest> is assigned to user <uid=user.openDJTafTest> on the first node,sc1,ldapsearch,"-b ou=Scopes,COM_INF_LDAP_ROOT_SUFFIX cn=scope.openDJTafTest",,"uniqueMember: uid=user.openDJTafTest,ou=People,COM_INF_LDAP_ROOT_SUFFIX",yes,0,5000,exit
Verify that assigning for scope <cn=scope.openDJTafTest> to user <uid=user.openDJTafTest> is replicated to the second node,sc2,ldapsearch,"-b ou=Scopes,COM_INF_LDAP_ROOT_SUFFIX cn=scope.openDJTafTest",,"uniqueMember: uid=user.openDJTafTest,ou=People,COM_INF_LDAP_ROOT_SUFFIX",yes,0,5000,exit
Verify that user <uid=user.openDJTafTest> is the member of role <cn=role.openDJTafTest> on the first node,sc1,ldapsearch,"-b ou=People,COM_INF_LDAP_ROOT_SUFFIX uid=user.openDJTafTest isMemberOf",,"isMemberOf: cn=role.openDJTafTest,ou=Roles,COM_INF_LDAP_ROOT_SUFFIX",yes,0,5000,exit
Verify that user <uid=user.openDJTafTest> is the member of role <cn=role.openDJTafTest> on the second node,sc2,ldapsearch,"-b ou=People,COM_INF_LDAP_ROOT_SUFFIX uid=user.openDJTafTest isMemberOf",,"isMemberOf: cn=role.openDJTafTest,ou=Roles,COM_INF_LDAP_ROOT_SUFFIX",yes,0,5000,exit
Verify that user <uid=user.openDJTafTest> is the member of group <cn=group.openDJTafTest> on the second node,sc2,ldapsearch,"-b ou=People,COM_INF_LDAP_ROOT_SUFFIX uid=user.openDJTafTest isMemberOf",,"isMemberOf: cn=group.openDJTafTest,ou=Groups,COM_INF_LDAP_ROOT_SUFFIX",yes,0,5000,exit
Verify that user <uid=user.openDJTafTest> is the member of group <cn=group.openDJTafTest> on the first node,sc1,ldapsearch,"-b ou=People,COM_INF_LDAP_ROOT_SUFFIX uid=user.openDJTafTest isMemberOf",,"isMemberOf: cn=group.openDJTafTest,ou=Groups,COM_INF_LDAP_ROOT_SUFFIX",yes,0,5000,exit
Verify that user <uid=user.openDJTafTest> is the member of scope <cn=scope.openDJTafTest> on the second node,sc2,ldapsearch,"-b ou=People,COM_INF_LDAP_ROOT_SUFFIX uid=user.openDJTafTest isMemberOf",,"isMemberOf: cn=scope.openDJTafTest,ou=Scopes,COM_INF_LDAP_ROOT_SUFFIX",yes,0,5000,exit
Verify that user <uid=user.openDJTafTest> is the member of scope <cn=scope.openDJTafTest> on the first node,sc1,ldapsearch,"-b ou=People,COM_INF_LDAP_ROOT_SUFFIX uid=user.openDJTafTest isMemberOf",,"isMemberOf: cn=scope.openDJTafTest,ou=Scopes,COM_INF_LDAP_ROOT_SUFFIX",yes,0,5000,exit
Verify unassigning role <cn=role.openDJTafTest> group <cn=group.openDJTafTest> and scope <cn=scope.openDJTafTest> to user <uid=user.openDJTafTest> on the first node,sc1,ldapmodify,-a -f unassignToUser.ldif,/tmp,MODIFY operation successful,yes,0,5000,exit
Verify that the role <cn=role.openDJTafTest> is assigned to user <uid=user.openDJTafTest> on the first node,sc1,ldapsearch,"-b ou=Roles,COM_INF_LDAP_ROOT_SUFFIX cn=role.openDJTafTest",,"uniqueMember: uid=user.openDJTafTest,ou=People,COM_INF_LDAP_ROOT_SUFFIX",no,0,5000,exit
Verify that the unassigning for role <cn=role.openDJTafTest> to user <uid=user.openDJTafTest> is replicated to the second node,sc1,ldapsearch,"-b ou=Roles,COM_INF_LDAP_ROOT_SUFFIX cn=role.openDJTafTest",,"uniqueMember: uid=user.openDJTafTest,ou=People,COM_INF_LDAP_ROOT_SUFFIX",no,0,5000,exit
Verify that the group <cn=group.openDJTafTest> is unssigned to user <uid=user.openDJTafTest> on the first node,sc1,ldapsearch,"-b ou=Groups,COM_INF_LDAP_ROOT_SUFFIX cn=group.openDJTafTest",,"uniqueMember: uid=user.openDJTafTest,ou=People,COM_INF_LDAP_ROOT_SUFFIX",no,0,5000,exit
Verify that unassigning for group <cn=group.openDJTafTest> to user <uid=user.openDJTafTest>is replicated to the second node,sc2,ldapsearch,"-b ou=Groups,COM_INF_LDAP_ROOT_SUFFIX cn=group.openDJTafTest",,"uniqueMember: uid=user.openDJTafTest,ou=People,COM_INF_LDAP_ROOT_SUFFIX",no,0,5000,exit
Verify that the scope <cn=scope.openDJTafTest> is unssigned to user <uid=user.openDJTafTest> on the first node,sc1,ldapsearch,"-b ou=Scopes,COM_INF_LDAP_ROOT_SUFFIX cn=scope.openDJTafTest",,"uniqueMember: uid=user.openDJTafTest,ou=People,COM_INF_LDAP_ROOT_SUFFIX",no,0,5000,exit
Verify that unassigning for scope <cn=scope.openDJTafTest> to user <uid=user.openDJTafTest>is replicated to the second node,sc2,ldapsearch,"-b ou=Scopes,COM_INF_LDAP_ROOT_SUFFIX cn=scope.openDJTafTest",,"uniqueMember: uid=user.openDJTafTest,ou=People,COM_INF_LDAP_ROOT_SUFFIX",no,0,5000,exit
Verify that user <uid=user.openDJTafTest> is not the member of role <cn=role.openDJTafTest> on the first node,sc1,ldapsearch,"-b ou=People,COM_INF_LDAP_ROOT_SUFFIX uid=user.openDJTafTest isMemberOf",,"isMemberOf: cn=role.openDJTafTest,ou=Roles,COM_INF_LDAP_ROOT_SUFFIX",no,0,5000,exit
Verify that user <uid=user.openDJTafTest> is not the member of role <cn=role.openDJTafTest> on the second node,sc2,ldapsearch,"-b ou=People,COM_INF_LDAP_ROOT_SUFFIX uid=user.openDJTafTest isMemberOf",,"isMemberOf: cn=role.openDJTafTest,ou=Roles,COM_INF_LDAP_ROOT_SUFFIX",no,0,5000,exit
Verify that user <uid=user.openDJTafTest> is not the member of group <cn=group.openDJTafTest> on the second node,sc2,ldapsearch,"-b ou=People,COM_INF_LDAP_ROOT_SUFFIX uid=user.openDJTafTest isMemberOf",,"isMemberOf: cn=group.openDJTafTest,ou=Groups,COM_INF_LDAP_ROOT_SUFFIX",no,0,5000,exit
Verify that user <uid=user.openDJTafTest> is not the member of group <cn=group.openDJTafTest> on the first node,sc1,ldapsearch,"-b ou=People,COM_INF_LDAP_ROOT_SUFFIX uid=user.openDJTafTest isMemberOf",,"isMemberOf: cn=group.openDJTafTest,ou=Groups,COM_INF_LDAP_ROOT_SUFFIX",no,0,5000,exit
Verify that user <uid=user.openDJTafTest> is not the member of scope <cn=scope.openDJTafTest> on the second node,sc2,ldapsearch,"-b ou=People,COM_INF_LDAP_ROOT_SUFFIX uid=user.openDJTafTest isMemberOf",,"isMemberOf: cn=scope.openDJTafTest,ou=Scopes,COM_INF_LDAP_ROOT_SUFFIX",no,0,5000,exit
Verify that user <uid=user.openDJTafTest> is not the member of scope <cn=scope.openDJTafTest> on the first node,sc1,ldapsearch,"-b ou=People,COM_INF_LDAP_ROOT_SUFFIX uid=user.openDJTafTest isMemberOf",,"isMemberOf: cn=scope.openDJTafTest,ou=Scopes,COM_INF_LDAP_ROOT_SUFFIX",no,0,5000,exit
Verify deleting user <uid=user.openDJTafTest> on the second node,sc2,ldapdelete,"uid=user.openDJTafTest,ou=People,COM_INF_LDAP_ROOT_SUFFIX",,DELETE operation successful,yes,0,5000,exit
Verify that the user <uid=user.openDJTafTest> is deleted on the second node,sc1,ldapsearch,"-b ou=people,COM_INF_LDAP_ROOT_SUFFIX --countEntries uid=user.openDJTafTest",,Total number of matching entries: 0,yes,0,5000,exit
Verify that the deleting for user <uid=user.openDJTafTest> is replicated to the first node,sc2,ldapsearch,"-b ou=people,COM_INF_LDAP_ROOT_SUFFIX --countEntries uid=user.openDJTafTest",,Total number of matching entries: 0,yes,0,5000,exit
Verify deleting user <uid=laadUser> on the first node,sc1,ldapdelete,"uid=laadUser,ou=People,COM_INF_LDAP_ROOT_SUFFIX",,DELETE operation successful,yes,0,5000,exit
Verify that the user <uid=laadUser> is deleted on the first node,sc1,ldapsearch,"-b ou=people,COM_INF_LDAP_ROOT_SUFFIX --countEntries uid=laadUser",,Total number of matching entries: 0,yes,0,5000,exit
Verify that deleting for user <uid=laadUser> is replicated to the second node,sc2,ldapsearch,"-b ou=people,COM_INF_LDAP_ROOT_SUFFIX --countEntries uid=laadUser",,Total number of matching entries: 0,yes,0,5000,exit
Verify deleting user <uid=cppUser> on the second node,sc2,ldapdelete,"uid=cppUser,ou=People,COM_INF_LDAP_ROOT_SUFFIX",,DELETE operation successful,yes,0,5000,exit
Verify that user <uid=cppUser> is deleted on the second node,sc2,ldapsearch,"-b ou=people,COM_INF_LDAP_ROOT_SUFFIX --countEntries uid=cppUser",,Total number of matching entries: 0,yes,0,5000,exit
Verify that deleting user <uid=cppUser> is replicated to the first node,sc1,ldapsearch,"-b ou=people,COM_INF_LDAP_ROOT_SUFFIX --countEntries uid=cppUser",,Total number of matching entries: 0,yes,0,5000,exit
Verify deleting user <uid=m2mUser> on the first node,sc1,ldapdelete,"uid=m2mUser,ou=People,COM_INF_LDAP_ROOT_SUFFIX",,DELETE operation successful,yes,0,5000,exit
Verify that user <uid=m2mUser> is deleted on the first node,sc1,ldapsearch,"-b ou=people,COM_INF_LDAP_ROOT_SUFFIX --countEntries uid=m2mUser",,Total number of matching entries: 0,yes,0,5000,exit
Verify that deleting for user <uid=m2mUser> is replicated to the second node,sc2,ldapsearch,"-b ou=people,COM_INF_LDAP_ROOT_SUFFIX --countEntries uid=m2mUser",,Total number of matching entries: 0,yes,0,5000,exit
Verify deleting role <cn=role.openDJTafTest> on the second node,sc2,ldapdelete,"cn=role.openDJTafTest,ou=Roles,COM_INF_LDAP_ROOT_SUFFIX",,DELETE operation successful,yes,0,10000,exit
Verify that role <cn=role.openDJTafTest> is deleted on the second node,sc2,ldapsearch,-b "ou=Roles,COM_INF_LDAP_ROOT_SUFFIX --countEntries cn=role.openDJTafTest",,Total number of matching entries: 0,yes,0,5000,exit
Verify that the deleting for role <cn=role.openDJTafTest> is replicated on the first node,sc1,ldapsearch,-b "ou=Roles,COM_INF_LDAP_ROOT_SUFFIX --countEntries cn=role.openDJTafTest",,Total number of matching entries: 0,yes,0,5000,exit
Verify deleting group <cn=group.openDJTafTest> on the second node,sc2,ldapdelete,"cn=group.openDJTafTest,ou=Groups,COM_INF_LDAP_ROOT_SUFFIX",,DELETE operation successful,yes,0,10000,exit
Verify that group <cn=group.openDJTafTest> is deleted on the second node,sc2,ldapsearch,"-b ou=Groups,COM_INF_LDAP_ROOT_SUFFIX --countEntries cn=group.openDJTafTest",,Total number of matching entries: 0,yes,0,5000,exit
Verify that deleting for group <cn=group.openDJTafTest> is replicated to the first node,sc1,ldapsearch,"-b ou=Groups,COM_INF_LDAP_ROOT_SUFFIX --countEntries cn=group.openDJTafTest",,Total number of matching entries: 0,yes,0,5000,exit
Verify deleting scope <cn=scope.openDJTafTest> on the second node,sc2,ldapdelete,"cn=scope.openDJTafTest,ou=Scopes,COM_INF_LDAP_ROOT_SUFFIX",,DELETE operation successful,yes,0,10000,exit
Verify that scope <cn=scope.openDJTafTest> is deleted on the second node,sc2,ldapsearch,"-b ou=Scopes,COM_INF_LDAP_ROOT_SUFFIX --countEntries cn=scope.openDJTafTest",,Total number of matching entries: 0,yes,0,5000,exit
Verify that deleting for scope <cn=scope.openDJTafTest> is replicated to the first node,sc1,ldapsearch,"-b ou=Scopes,COM_INF_LDAP_ROOT_SUFFIX --countEntries cn=scope.openDJTafTest",,Total number of matching entries: 0,yes,0,5000,exit
